@model IEnumerable<ERA_BMS.Models.CulvertImprovement>

@*If there is not improvement data for the selected, there is nothing to show*@
@if (Model.Count() != 0)
{
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title panel-info">List of Improvements for '<b>@Model.FirstOrDefault().Culvert.CulvertNo</b>'</h3>
        </div>

        <div class="panel-body">
            <table class="table table-striped table-condensed table-responsive table-bordered display compact hover" id="culvertimprovement">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.Culvert.CulvertNo)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ImprovementYear)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ImprovementDate)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ImprovementType.ImprovementTypeName)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ImprovementCost)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ImprovementAction)
                        </th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Culvert.CulvertNo)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ImprovementYear)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ImprovementDate)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ImprovementType.ImprovementTypeName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ImprovementCost)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ImprovementAction)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="panel-footer">
            <h3 class="panel-title">Total No. of Improvements: <b>@Model.Count()</b></h3>
        </div>
    </div>
}
else
{
    var cul = ViewBag.Culvert;

    <div class="panel-footer">
        <h3 class="panel-title">Improvement data not available for <b>'@cul.CulvertNo'</b></h3>
    </div>
}

<script>
    $(document).ready(function () {
        $('#culvertimprovement').dataTable({
            paging: true,
            pageLength: 15,
            bLengthChange: true,
            scrollY: 400,
            
            searching: true,
            select: true,
            dom: 'lBfrtip',
            //buttons: ['copy', 'excel', 'pdf', 'print']
            buttons: [
                { extend: 'copy', className: 'btn btn-sm btn-primary' },
                { extend: 'excel', className: 'btn btn-sm btn-primary', text: 'Export Excel' },
                { extend: 'pdf', className: 'btn btn-sm btn-primary', text: 'Export PDF' },
                { extend: 'print', className: 'btn btn-sm btn-primary' }
            ]
        });
    });
</script>





