@model IEnumerable<ERA_BMS.Models.BridgeMedia>


@{
    ViewBag.Title = "Bridge Damage Image";
}

@*<div style="display: flex;">*@
<div class="row">
    @if (Model.Count() == 0)
    {
        <div class="col-lg-3 col-md-4 col-sm-6 col-xs-10" align="center">
            <h5><i>No damage images for Bridge: <b>@TempData["BridgeName"]</b></i></h5>
        </div>
    }
    else
    {
        foreach (var bridgeimage in Model.Select((value, index) => new { index, value }))
        {

            string fullPath = bridgeimage.value.MediaFilePath;
            string filename = Path.GetFileName(fullPath); //extract the file name from the full path
            string description = bridgeimage.value.Description;

            @*<div style="clear: left;">*@
            <div class="col-lg-2 col-md-2 col-sm-4 col-xs-6">
                <table>
                    @*<tr><td><a href="@fullPath" target="_blank"><img src="@fullPath" alt="nopic" style="height:auto; width: 100px; margin: 20px;" /></a></td></tr>*@
                    <tr>
                        <td>
                            <a href="@Url.Action("BridgeDamageImages", "ImageGallery", new { id = bridgeimage.value.BridgeId, val = bridgeimage.index })" target="_blank">
                                <img src="@fullPath" alt="nopic" style="height:auto; width: 100px; margin: 20px;" onerror="this.onerror = null; this.src = '../../images/error_2.png'; this.style.width = '20px'; this.title = 'Image Not Found';" data-toggle="tooltip" title="Preview Photo" />
                            </a>
                        </td>
                    </tr>
                    <tr><td><p align="center">@description</p></td></tr>
                    <tr><td><p align="center">(@filename)</p></td></tr>
                </table>
            </div>
            if ((bridgeimage.index + 1) % 6 == 0)
            {
                <div class="clearfix visible-lg visible-md"></div>
            }
            if ((bridgeimage.index + 1) % 3 == 0)
            {
                <div class="clearfix visible-sm"></div>
            }
            if ((bridgeimage.index + 1) % 2 == 0)
            {
                <div class="clearfix visible-xs"></div>
            }
        }
    }
</div>
