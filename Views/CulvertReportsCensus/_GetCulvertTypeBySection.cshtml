@model IEnumerable<ERA_BMS.Models.CulvertTypeBySection>

<div class="panel panel-primary">
    <div class="panel-heading">
        <h3 class="panel-title panel-info">Census of Culverts by <b>Culvert Type</b> by <b>Section</b> (District: <b>@ViewBag.DistrictName</b>)</h3>
    </div>

    <div class="panel-body">
        <br />
        <br />
        <table class="table table-striped table-condensed table-responsive table-bordered centeredtable display hover" id="culverttypecensusbysection">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.SectionName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Total)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Slab_Culvert)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Arch_Culvert)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Box_Culvert)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.RC_Pipe)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Metal_Pipe)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Ford)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Mixed)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Not_Visible)
                    </th>
                </tr>
            </thead>
            @{
                int totCul = 0;
                int totSLB = 0;
                int totAC = 0;
                int totBX = 0;
                int totRCP = 0;
                int totMP = 0;
                int totFRD = 0;
                int totMIX = 0;
                int totNV = 0;
            }
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <th>
                            @Html.DisplayFor(modelItem => item.SectionName)
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => item.Total)
                            @{ totCul += (int)item.Total;}
                        </th>
                        <td>
                            @Html.DisplayFor(modelItem => item.Slab_Culvert)
                            @{ totSLB += (int)item.Slab_Culvert;}
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Arch_Culvert)
                            @{ totAC += (int)item.Arch_Culvert;}
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Box_Culvert)
                            @{ totBX += (int)item.Box_Culvert;}
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.RC_Pipe)
                            @{ totRCP += (int)item.RC_Pipe;}
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Metal_Pipe)
                            @{ totMP += (int)item.Metal_Pipe;}
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Ford)
                            @{ totFRD += (int)item.Ford;}
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Mixed)
                            @{ totMIX += (int)item.Mixed;}
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Not_Visible)
                            @{ totNV += (int)item.Not_Visible;}
                        </td>
                    </tr>
                }
                <tr style="background-color: #e9e9e9; font-style: italic">
                    <th><i>Total for all Sections</i></th>
                    <th>@totCul</th>
                    <th>@totSLB</th>
                    <th>@totAC</th>
                    <th>@totBX</th>
                    <th>@totRCP</th>
                    <th>@totMP</th>
                    <th>@totFRD</th>
                    <th>@totMIX</th>
                    <th>@totNV</th>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="panel-footer">
        <h3 class="panel-title">Total of <b>@Model.Count()</b> Sections and <b>@totCul</b> Culverts </h3>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#culverttypecensusbysection').dataTable({
            paging: true,
            pageLength: 15,
            lengthMenu: [15, 25, 50, 75, 100], //drop down list showing no. records per page
            bLengthChange: true,
            scrollY: 400,
            searching: true,
            select: true,
            aaSorting: [],
            dom: 'lBfrtip',
            aoColumnDefs: [
                { orderable: false, aTargets: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] }
            ],
            buttons: [
                { extend: 'copy', className: 'btn btn-sm btn-primary' },
                { extend: 'excel', className: 'btn btn-sm btn-primary', text: 'Export Excel' },
                { extend: 'pdf', className: 'btn btn-sm btn-primary', text: 'Export PDF' },
                { extend: 'print', className: 'btn btn-sm btn-primary' }
            ]
        });
    });
</script>