@model List<ERA_BMS.ViewModels.CommentAndObservationViewModel>


<div class="panel panel-primary">
    <div class="panel-heading">
        <h3 class="panel-title panel-info">Inspector's Recommendations & Comments (District: <b>@ViewBag.District</b>, Section: <b>@ViewBag.Section</b>, Inspection Year: <b>@ViewBag.InspectionYear</b>)</h3>
    </div>

    <div class="panel-body">
        <br />
        <br />
        <table class="table table-striped table-condensed table-responsive display compact hover" id="tblbridgedamagecondition">
            <thead>
                <tr>
                    <th>
                        Bridge No
                    </th>
                    <th>
                        Bridge Name
                    </th>
                    <th>
                        Road Segment
                    </th>
                    <th>
                        Inspector's Recommendation
                    </th>
                    <th>
                        Water Way Adequacy
                    </th>
                    <th>
                        Comments
                    </th>
                    <th></th><th></th>
                </tr>
            </thead>

            <tbody>
                @for (int i = 0; i < Model.Count; i++)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => Model[i].Observation.Bridge.BridgeNo)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Model[i].Observation.Bridge.BridgeName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Model[i].Observation.Bridge.Segment.SegmentName)
                        </td>
                        @{
                            string bg = "";
                            string fore = "";
                            if (Model[i].Observation.MaintenanceUrgency.UrgencyId == 2)
                            {
                                bg = "red";
                                fore = "white";
                            }
                        }
                        <td style="background-color: @bg; color: @fore">
                            @Html.DisplayFor(modelItem => Model[i].Observation.MaintenanceUrgency.UrgencyName)
                        </td>
                        <td>
                            @{
                                string adequacy = (Model[i].Observation.WaterWayAdequacy == true) ? "Yes" : "No";
                            }
                            @adequacy
                        </td>
                        <td>
                            <ul>
                                @for (int j = 0; j < Model[i].Comment.Count; j++)
                                {
                                    <li>@Html.DisplayFor(modelItem => Model[i].Comment[j])</li>
                                }
                            </ul>
                        </td>
                        <td align="center">
                            <a href="@Url.Action("BridgeDamageImages", "ImageGallery", new { id = Model[i].Observation.BridgeId })" target="_blank" class="glyphicon glyphicon-new-window" data-toggle="tooltip" title="View Damage Images" style="font-size: 14px"></a>
                        </td>
                        <td>
                            <a href="@Url.Action("Index", "DamageInspMajor", new { id = Model[i].Observation.BridgeId, val = ViewBag.InspectionYear })" target="_blank" class="glyphicon glyphicon-new-window" data-toggle="tooltip" title="Go to Inspection" style="font-size: 14px"></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="panel-footer">
        <h3 class="panel-title">Total No. of Bridges: <b>@Model.Count()</b></h3>
    </div>
</div>

<script>
    $(document).ready(function () {
        

        $('#tblbridgedamagecondition').dataTable({
            paging: true,
            pageLength: 15,
            bLengthChange: true,
            scrollY: 400,
            
            searching: true,
            select: true,
            dom: 'lBfrtip',
            //buttons: ['copy', 'excel', 'pdf', 'print']
            buttons: [
                { extend: 'copy', className: 'btn btn-sm btn-primary' },
                { extend: 'excel', className: 'btn btn-sm btn-primary', text: 'Export Excel' },
                { extend: 'pdf', className: 'btn btn-sm btn-primary', text: 'Export PDF' },
                { extend: 'print', className: 'btn btn-sm btn-primary' }
            ]
        });
    });
</script>

